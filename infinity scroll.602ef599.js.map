{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,iEAOMC,EAAO,CACTC,OAAQC,SAASC,cAAc,gBAC/BC,UAAWF,SAASC,cAAc,YAClCE,SAAUH,SAASC,cAAc,cAEjCG,EAAU,KACRC,EAAa,IAAI,EAAAC,EAAAC,Y,SAIRC,I,OAAAA,EAAfC,EAAAb,EAAA,CAAAa,EAAAC,GAAAC,MAAA,SAAAC,EAAsCC,G,IAatBC,E,qEAZZD,EAAIE,iBACJC,IAEAX,EAAWY,MAAQJ,EAAIK,OAAOC,SAASC,YAAYC,MAAMC,OACzDjB,EAAWkB,YAEc,KAArBlB,EAAWY,MAAY,C,sBACvBO,EAAAC,OAAOC,QAAQ,0C,oDAKQrB,EAAWsB,c,WACT,KADnBb,EAAMc,EAAAC,KAAJf,MACCgB,KAAKC,OAAY,C,uBACtBP,EAAAC,OAAOC,QAAQ,4EACf5B,EAAKC,OAAOiC,Q,2BAGhBR,EAAAC,OAAOQ,QAAQ,oBAAmCC,OAAfpB,EAAKqB,UAAU,aAElDrC,EAAKI,UAAUkC,WAAY,EAAAC,EAAAC,SAAmBxB,EAAKgB,MACnDzB,EAAWkC,gBAEXnC,EAAU,IAAIK,EAAA+B,GAAJ,CAAmB,cAAe,CACpCC,aAAc,IACdC,YAAY,I,kDAGpBC,QAAQC,IAAGhB,EAAAiB,I,2DA7BkBC,MAAAC,KAAAC,U,CAHrClD,EAAKC,OAAOkD,iBAAiB,U,SAGSpC,G,OAAvBL,EAAsBsC,MAAAC,KAAAC,U,IAiCrC,I,EAAME,G,EAAUzC,EAAAb,EAAA,CAAAa,EAAAC,GAAAC,MAAA,SAAAC,EAAOuC,G,IACdC,EAAAC,EAAAC,EAAAC,EAAAC,EAIe1C,E,kEAJfsC,GAAW,EAAXC,GAAW,EAAXC,OAAWG,E,SAAXF,EAAeJ,EAAOO,OAAAC,Y,UAAtBP,GAAAI,EAAAD,EAAWK,QAAAC,KAAA,C,oBAAXL,EAAWnC,MACFyC,gBAAuC,KAArBzD,EAAWY,MAAY,C,yCAGpBZ,EAAWsB,c,OAA5Bb,EAAMc,EAAAC,KAAJf,KACRhB,EAAKI,UAAU6D,mBAAmB,aAAa,EAAA1B,EAAAC,SAAmBxB,EAAKgB,OACvEzB,EAAWkC,gBAEXnC,EAAQ4D,UAsBWC,SAAvBC,SAAuBD,EAAAjE,SAASC,cAAc,YAAYkE,kBAAkBC,wBAA5EF,EAAuBD,EAAvBI,OAERC,OAAOC,SAAS,CACZC,IAAkB,EAAbN,EACLO,SAAU,W,kDAvBF9B,QAAQC,IAAGhB,EAAAiB,I,QAXlBO,GAAW,E,yEAAXC,GAAW,EAAXC,EAAW1B,EAAA8C,G,4BAAXtB,GAAW,MAAXG,EAAWoB,QAAXpB,EAAWoB,S,sBAAXtB,EAAW,C,sBAAXC,E,0FA6BT,IACmCW,EAAvBC,C,0DA/BWf,G,iCA0BvB,SAASnC,IACLlB,EAAKI,UAAUkC,UAAY,E,CANd,IAAIwC,qBAAqB1B,EAH1B,CACZ2B,WAAY,UAGPC,QAAQhF,EAAKK,S","sources":["src/js/infinityScroll.js"],"sourcesContent":["import { PixabayAPI } from './pixabay-api';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport createGalleryCards from '../templates/gallery-card.hbs';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst refs = {\n    formEl: document.querySelector('.search-form'),\n    galleryEl: document.querySelector('.gallery'),\n    sentinel: document.querySelector('#sentinel'),\n}\nlet gallery = null;\nconst pixabayAPI = new PixabayAPI();\nrefs.formEl.addEventListener('submit', handleSearchFormSubmit);\n\n\nasync function handleSearchFormSubmit(evt) {\n    evt.preventDefault();\n    clearMarkup();\n\n    pixabayAPI.query = evt.target.elements.searchQuery.value.trim();\n    pixabayAPI.resetPage();\n\n    if (pixabayAPI.query === '') {\n        Notify.failure(\"Sorry, enter something in search line.\");\n        return;\n    };\n\n    try {\n        const { data } = await pixabayAPI.fetchPhotos();\n        if (data.hits.length === 0) {\n            Notify.failure(\"Sorry, there are no images matching your search query. Please try again.\");\n            refs.formEl.reset();\n            return;\n        }\n        Notify.success(`Hooray! We found ${data.totalHits} images.`);\n\n        refs.galleryEl.innerHTML = createGalleryCards(data.hits);\n        pixabayAPI.incrementPage();\n\n        gallery = new SimpleLightbox('.gallery  a', {\n                captionDelay: 250,\n                scrollZoom: false,\n        });\n    } catch (err) {\n        console.log(err);\n    }\n};\n\nconst onEntry = async (entries) => {\n    for (const entry of entries) {\n        if (entry.isIntersecting && pixabayAPI.query !== '') {\n\n            try {\n                const { data } = await pixabayAPI.fetchPhotos();\n                refs.galleryEl.insertAdjacentHTML('beforeend', createGalleryCards(data.hits));\n                pixabayAPI.incrementPage();\n\n                gallery.refresh();\n                smoothScroll();\n            } catch (err) {\n                console.log(err);\n            }\n        }\n    };\n};\n\nconst options = {\n    rootMargin: '150px',\n}\nconst observer = new IntersectionObserver(onEntry, options);\nobserver.observe(refs.sentinel);\n\n\n\nfunction clearMarkup() {\n    refs.galleryEl.innerHTML = '';\n};\n\nfunction smoothScroll() {\n    const { height: cardHeight } = document.querySelector(\".gallery\").firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: \"smooth\",\n    });\n};\n\n\n\n"],"names":["$bpxeT","parcelRequire","$0dda5a411dab1a32$var$refs","formEl","document","querySelector","galleryEl","sentinel","$0dda5a411dab1a32$var$gallery","$0dda5a411dab1a32$var$pixabayAPI","$8H72y","PixabayAPI","$0dda5a411dab1a32$var$_handleSearchFormSubmit","$parcel$interopDefault","$2TvXO","mark","_callee","evt","data","preventDefault","$0dda5a411dab1a32$var$clearMarkup","query","target","elements","searchQuery","value","trim","resetPage","$h6c0i","Notify","failure","fetchPhotos","_ctx","sent","hits","length","reset","success","concat","totalHits","innerHTML","$86MAb","default","incrementPage","$5IjG7","captionDelay","scrollZoom","console","log","t0","apply","this","arguments","addEventListener","$0dda5a411dab1a32$var$onEntry","entries","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","undefined","Symbol","iterator","next","done","isIntersecting","insertAdjacentHTML","refresh","ref","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","t1","return","IntersectionObserver","rootMargin","observe"],"version":3,"file":"infinity scroll.602ef599.js.map"}