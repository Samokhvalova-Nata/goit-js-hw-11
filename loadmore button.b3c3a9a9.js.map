{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,iEAOMC,EAAO,CACTC,OAAQC,SAASC,cAAc,gBAC/BC,cAAeF,SAASC,cAAc,cACtCE,UAAWH,SAASC,cAAc,aAElCG,EAAU,KACRC,EAAa,IAAI,EAAAC,EAAAC,Y,SAMRC,I,OAAAA,EAAfC,EAAAb,EAAA,CAAAa,EAAAC,GAAAC,MAAA,SAAAC,EAAsCC,G,IActBC,E,qEAbZD,EAAIE,iBACJC,IAEAX,EAAWY,MAAQJ,EAAIK,OAAOC,SAASC,YAAYC,MAAMC,OACzDjB,EAAWkB,YAEc,KAArBlB,EAAWY,MAAY,C,sBACvBO,EAAAC,OAAOC,QAAQ,0CACfC,I,oDAKuBtB,EAAWuB,c,WACT,KADnBd,EAAMe,EAAAC,KAAJhB,MACCiB,KAAKC,OAAY,C,uBACtBR,EAAAC,OAAOC,QAAQ,4EACfC,IACA7B,EAAKC,OAAOkC,Q,2BAIhBT,EAAAC,OAAOS,QAAQ,oBAAmCC,OAAfrB,EAAKsB,UAAU,aAClDtC,EAAKK,UAAUkC,WAAY,EAAAC,EAAAC,SAAmBzB,EAAKiB,MACnDS,IAEApC,EAAU,IAAIK,EAAAgC,GAAJ,CAAmB,cAAe,CACpCC,aAAc,IACdC,YAAY,IAGhB7B,EAAKsB,WAAa/B,EAAWuC,OAC7BjB,I,kDAGJkB,QAAQC,IAAGjB,EAAAkB,I,2DAnCkBC,MAAAC,KAAAC,U,UAuCtBC,I,OAAAA,EAAf1C,EAAAb,EAAA,CAAAa,EAAAC,GAAAC,MAAA,SAAAC,EAAsCC,G,IAItBC,E,yEAHZT,EAAW+C,gB,kBAGgB/C,EAAWuB,c,OAA5Bd,EAAMe,EAAAC,KAAJhB,KAEJuC,KAAKC,KAAKxC,EAAKsB,UAAY/B,EAAWuC,SAAWvC,EAAWkD,OAC5D5B,IACAH,EAAAC,OAAO+B,KAAK,+DAGhB1D,EAAKK,UAAUsD,mBAAmB,aAAa,EAAAnB,EAAAC,SAAmBzB,EAAKiB,OACvE3B,EAAQsD,UACRC,I,kDAEAd,QAAQC,IAAGjB,EAAAkB,I,2DAfkBC,MAAAC,KAAAC,U,CAmBrC,SAASlC,IACLlB,EAAKK,UAAUkC,UAAY,E,CAG/B,SAASsB,IACL,IAAQC,EAAuB5D,SAASC,cAAc,YAAY4D,kBAAkBC,wBAA5EC,OAERC,OAAOC,SAAS,CACZC,IAAkB,EAAbN,EACLO,SAAU,U,CAIlB,SAASxC,IACL7B,EAAKI,cAAckE,UAAUC,IAAI,Y,CAGrC,SAAS7B,IACL1C,EAAKI,cAAckE,UAAUE,OAAO,Y,CAhFxCxE,EAAKC,OAAOwE,iBAAiB,U,SAIS1D,G,OAAvBL,EAAsBwC,MAAAC,KAAAC,U,IAHrCpD,EAAKI,cAAcqE,iBAAiB,S,SA0CE1D,G,OAAvBsC,EAAsBH,MAAAC,KAAAC,U","sources":["src/js/loadMoreBtn.js"],"sourcesContent":["import { PixabayAPI } from './pixabay-api';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport createGalleryCards from '../templates/gallery-card.hbs';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst refs = {\n    formEl: document.querySelector('.search-form'),\n    loadMoreBtnEl: document.querySelector('.load-more'),\n    galleryEl: document.querySelector('.gallery'),\n}\nlet gallery = null;\nconst pixabayAPI = new PixabayAPI();\n\nrefs.formEl.addEventListener('submit', handleSearchFormSubmit);\nrefs.loadMoreBtnEl.addEventListener('click', handleLoadMoreBtnClick);\n\n\nasync function handleSearchFormSubmit(evt) {\n    evt.preventDefault();\n    clearMarkup();\n\n    pixabayAPI.query = evt.target.elements.searchQuery.value.trim();\n    pixabayAPI.resetPage();\n\n    if (pixabayAPI.query === '') {\n        Notify.failure(\"Sorry, enter something in search line.\");\n        hideLoadMoreBtn();\n        return;\n    };\n\n    try {\n        const { data } = await pixabayAPI.fetchPhotos();\n        if (data.hits.length === 0) {\n            Notify.failure(\"Sorry, there are no images matching your search query. Please try again.\");\n            hideLoadMoreBtn();\n            refs.formEl.reset();\n            return;\n        }\n\n        Notify.success(`Hooray! We found ${data.totalHits} images.`);\n        refs.galleryEl.innerHTML = createGalleryCards(data.hits);\n        showLoadMoreBtn();\n\n        gallery = new SimpleLightbox('.gallery  a', {\n                captionDelay: 250,\n                scrollZoom: false,\n        });\n\n        if (data.totalHits <= pixabayAPI.count) {\n            hideLoadMoreBtn();\n        };\n    } catch (err) {\n        console.log(err);\n    }\n};\n\nasync function handleLoadMoreBtnClick(evt) {\n    pixabayAPI.incrementPage();\n\n    try {\n        const { data } = await pixabayAPI.fetchPhotos();\n        \n        if (Math.ceil(data.totalHits / pixabayAPI.count) === pixabayAPI.page) {\n            hideLoadMoreBtn();\n            Notify.info(\"We're sorry, but you've reached the end of search results.\");\n        }\n\n        refs.galleryEl.insertAdjacentHTML('beforeend', createGalleryCards(data.hits));\n        gallery.refresh();\n        smoothScroll();\n    } catch (err) {\n        console.log(err);\n    }\n};\n\nfunction clearMarkup() {\n    refs.galleryEl.innerHTML = '';\n};\n\nfunction smoothScroll() {\n    const { height: cardHeight } = document.querySelector(\".gallery\").firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: \"smooth\",\n    });\n};\n\nfunction hideLoadMoreBtn() {\n    refs.loadMoreBtnEl.classList.add('is-hidden');\n};\n\nfunction showLoadMoreBtn() {\n    refs.loadMoreBtnEl.classList.remove('is-hidden');\n};\n"],"names":["$bpxeT","parcelRequire","$817fd481ae4e523e$var$refs","formEl","document","querySelector","loadMoreBtnEl","galleryEl","$817fd481ae4e523e$var$gallery","$817fd481ae4e523e$var$pixabayAPI","$8H72y","PixabayAPI","$817fd481ae4e523e$var$_handleSearchFormSubmit","$parcel$interopDefault","$2TvXO","mark","_callee","evt","data","preventDefault","$817fd481ae4e523e$var$clearMarkup","query","target","elements","searchQuery","value","trim","resetPage","$h6c0i","Notify","failure","$817fd481ae4e523e$var$hideLoadMoreBtn","fetchPhotos","_ctx","sent","hits","length","reset","success","concat","totalHits","innerHTML","$86MAb","default","$817fd481ae4e523e$var$showLoadMoreBtn","$5IjG7","captionDelay","scrollZoom","count","console","log","t0","apply","this","arguments","$817fd481ae4e523e$var$_handleLoadMoreBtnClick","incrementPage","Math","ceil","page","info","insertAdjacentHTML","refresh","$817fd481ae4e523e$var$smoothScroll","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","classList","add","remove","addEventListener"],"version":3,"file":"loadmore button.b3c3a9a9.js.map"}